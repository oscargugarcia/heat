% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aggregation.R
\name{add_metadata_cols}
\alias{add_metadata_cols}
\title{Add Metadata Columns to Data Table}
\usage{
add_metadata_cols(dt, trans_type, metadata = NULL, trans_args)
}
\arguments{
\item{dt}{A data.table containing spatial aggregation results.}

\item{trans_type}{A string specifying the transformation type (e.g., "polynomial").}

\item{metadata}{A named list of metadata values to add as new columns; defaults to NULL.}

\item{trans_args}{A named list of transformation arguments; these will be concatenated into a string.}
}
\value{
The modified data.table (dt) with the added metadata columns and reordered columns.
}
\description{
This function adds metadata columns to a spatial aggregation data.table (dt). Specifically, it:
\itemize{
\item Adds a column "trans_type" with the provided transformation type.
\item Adds columns from the supplied metadata (a named list) to dt, if provided.
\item Concatenates the transformation arguments (provided as a named list) into a single string,
stored in the "trans_call" column.
\item Reorders the columns so that key metadata fields appear first: "poly_id", "trans_type", "trans_var"
then the metadata columns (if any), followed by "trans_call", and finally any remaining columns.
}
}
\examples{
\dontrun{
  dt <- data.table(poly_id = 1:3, trans_var = c("A", "B", "C"), other_col = 1:3)
  trans_type <- "polynomial"
  metadata <- list(source = "ERA5", resolution = "0.25")
  trans_args <- list(degree = 3, raw = TRUE)

  dt <- add_metadata_cols(dt, trans_type, metadata, trans_args)
}
}
