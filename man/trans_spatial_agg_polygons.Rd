% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aggregation.R
\name{trans_spatial_agg_polygons}
\alias{trans_spatial_agg_polygons}
\title{Core function to Transform and Spatially Aggregate a Raster}
\usage{
trans_spatial_agg_polygons(
  raster_subset,
  trans_fun,
  checked_trans_args,
  polygons,
  agg_weights,
  spatial_agg_args,
  poly_id_col,
  verbose = 1
)
}
\arguments{
\item{raster_subset}{A raster object or a subset of a raster to be processed.}

\item{trans_fun}{A transformation function to be applied to the raster subset.}

\item{checked_trans_args}{A list of pre-validated arguments for the transformation function.}

\item{polygons}{An sf object containing spatial polygons over which the aggregation is performed.}

\item{agg_weights}{A raster or a character string (e.g., "area") used as weights in the spatial aggregation.}

\item{spatial_agg_args}{A list of arguments to pass to \code{exact_extract} for spatial aggregation (e.g., aggregation function, stack_apply).}

\item{poly_id_col}{The name of the column in the polygons object that identifies each polygon.}

\item{verbose}{Integer verbosity level (0 = silent, 1 = concise, 2 = detailed).}
}
\value{
A cleaned spatial aggregation output as a data table (or data frame) containing the polygon identifiers and aggregated values for each time step.
}
\description{
This helper function processes a raster (subset) by applying a specified transformation (e.g., polynomial or spline expansion), performing spatial aggregation using the \code{exact_extract} function, and cleaning the aggregated output. It prints standardized elapsed time messages for each step (transformation, aggregation, and cleaning) to facilitate performance tracking. The final output is a cleaned data table (or data frame) that includes polygon identifiers and aggregated values for each time step.
}
\examples{
\dontrun{
  result <- trans_spatial_agg_polygons(raster_subset, trans_fun, checked_trans_args,
                                   polygons, agg_weights, spatial_agg_args, poly_id_col, verbose = 1)
}
}
